# GCC的编译过程

## 编译流程
- main.c(预处理) -> main.i(编译) -> main.S(汇编) -> main.o(链接,可以和其它.o文件一起链接) -> led.elf(反汇编) -> led.dis
- 预处理:展开宏，引入头文件，展开头文件
- 编译:检查语法错误，生成.S的汇编码
- 汇编:把汇编码转换成机器码

## 头文件
- “<>”引入的头文件默认是在系统目录

## 链接
- 链接动态库:链接出来的可执行文件比较小，之后运行程序必须要有相应的动态库，因为在程序运行的时候会动态的去加载库文件。
- 链接静态库:链接出来的可执行文件比较大，之后可以不依赖静态库来执行，相当于把静态库一起链接进去了。
- 使用gcc来链接会自动添加一些默认的头文件，适用ld来链接就是存链接，没有多余的操作

## 依赖问题
- gcc -M c.c:可以打印c.c的依赖文件
- gcc -M -MF c.d c.c:把c.c的依赖信息写入c.d
- gcc -c -o c.o c.c -MD -MF:把c.c编译成c.o，并把依赖文件写入c.d

## CFLAGS
- gcc编译的时候最好加上“-Werror”参数，这个会把警告也当成错误来处理，有些警告可能会影响程序
- gcc中的-I选项，可以添加头文件的搜索路径，默认是gcc目录。例（-I. 可以在当前路径下搜索，-Iinclude 可以在当前路径的include目录下搜索）
