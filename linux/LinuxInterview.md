
# LinuxInterview

- 使用GCC的"O0"优化选项来编译内核有什么优势？
> linux内核默认使用O2优化等级，但是在使用GDB调试的时候会出现光标乱跳，有些变量的值出现 **optimezed out** 等问题，影响调试效果。所以为了调试方便需要把"O2"改成"O0"，但这会导致一些编译问题，需要自己手动更改。于此同时还会让内核的运行效率变低。
- 什么是加载地址、运行地址，链接地址？
> 加载地址：存储代码的物理地址。
> 运行地址：程序执行的地址。
> 链接地址：在编译链接时指定的地址，是程序员设想将来程序运行的地址。程序中所有的标号的地址在程序链接好以后就确定了，不会因为程序在哪个地址行而改变。可以使用objdump命令来查看链接地址。
- 什么是位置无关指令？什么是位置有关指令？
> 位置无关指令是CPU取指时用相对地址，位置有关指令是CPU取指时用了绝对地址
- 什么是debugfs?
> debugfs可用于内核向用户空间提供信息，debugfs是个小型文件系统，与/proc和sysfs不同，debugfs根本没有较为严苛的规则和定义，开发人员可以在里面放置想要的任何信息，以便于系统开发和调试。
###### 通常使用如下命令安装`debugfs`：
```shell
mount -t debugfs none /sys/kernel/debug
```
```shell
mount -t debugfs debugfs /sys/kernel/debug/
```
###### 也可以在/etc/fstab文件下使用下面语句：
```shell
debug /sys/kernel/debug debugfs debugfs 0 0
```
- 什么是OOM？
> 当系统内存不够的时候，会产生OOM（out of memory），OOM Killer会计算出需要杀到的进程，被系统杀掉。
- 什么是OOP？
> OOP错误一般都是内存错误（越界访问，访问已经被释放的内存，重复释内存，内存泄漏，栈溢出）。和应用程序的segmentation fault（段错误）差不多。可以使用KASAN（Kernel Address SANtizer）来检查。
- 触发OOPS的机制?
> 当处理器在内核空间中访问一个非法的指针时，因为虚拟地址到物理地址的映射关系没有建立，会触发一个缺页中断，在缺页中断中地址是非法的，内核无法确定地为该地址建立映射关系，所以内核触发了一个OOPS错误。
- 什么是直接寻址，间接寻址，基址寻址？
> 立即寻址：这种方式直接把要存储的数据作为指令的一部分，存储在指令中。这种方式最简单，但数据可能因为指令变化而变化，不能很好的实现数据重复利用。
> 直接寻址：这种方式直接使用指令中的地址，从指定的地址获取数据。这种方式可以很好的实现数据重复利用，但需要较多的存储空间。
> 间接寻址：这种方式使用一个指针，指向要获取的数据所在的地址。这种方式可以很好的实现数据的动态分配，同时节省存储空间。
- kdump的工作原理是什么？
> 第一个内核出现panic以后（可以通过sysrq触发panic）.系统会调用machine_kexec(),触发并启动第二个内核，并传递elf头文件地址。第二个内核与相应的ramdisk一起组建一个微环境，获取elf头文件地址，并生成出/proc/vmcore文件。第二个内核的ramdisk中的脚本开始执行，将/proc/vmcore文件中的数据通过文件的读写和网络来实现对第一个内核的内存进行收集和转存。最后可以用gdb,crash等工具对收集到的vmcore文件镜像分析。
- RCU是什么？
> RCU是read-copy-update的简称，在修改数据的时候，首先需要读取数据，然后生成一个副本，对副本进行修改，修改完成之后再将老数据update成新的数据，此所谓RCU。